!function(){"use strict";var routeLib="/ng-math-factory/src";angular.module("ng-math-factory",["math.methods","math.general","math.adjust-curve","math.search-raiz"]).factory("$math",["$q","$methods","adjustCurve","general","searchRaiz",function($q,$methods,adjustCurve,general,searchRaiz){function resolve(method,input,routeDep,callback){for(var methods_factory=$methods,i=0;i<methods_factory.length;i++)if(method.name===methods_factory[i].name){if(void 0!==methods_factory[i].libs)for(var k=0;k<methods_factory[i].libs.length;k++){var oHead=document.getElementsByTagName("head")[0],oScript=document.createElement("script");oScript.type="text/javascript",oScript.charset="utf-8",oScript.src=routeDep+routeLib+methods_factory[i].libs[k],oHead.appendChild(oScript)}eval(methods_factory[i].factory).options(input,method.sub).then(function(e){var a=e[1];a.resolve=routeDep+routeLib+a.resolve,a.graphics=void 0===a.graphics?void 0:routeDep+routeLib+a.graphics,callback(e[0],a)});break}}function getMethods(){return $methods}return{resolve:resolve,getMethods:getMethods}}])}(),function(){"use strict";angular.module("math.methods",[]).factory("$methods",function(){var e="/ng-math-factory/src";return[{name:"General",sub:[{name:"Operación basica",in:"formula",readme:e+"/general/readme/op_basic.html"}],factory:"general"},{name:"Ajuste de curvas",sub:[{name:"Mínimos cuadrados",in:"xy"}],factory:"adjustCurve"},{name:"Búsqueda de raíces",sub:[{name:"Punto fijo",in:"formula",readme:e+"/search_raiz/readme/point_fixed.html"},{name:"Bisección",in:"formula",readme:e+"/search_raiz/readme/bisection.html"},{name:"Newton Raphson",in:"formula",readme:e+"/search_raiz/readme/newton.html"},{name:"Regla falsa",in:"formula",readme:e+"/search_raiz/readme/rule_false.html"}],factory:"searchRaiz"}]})}(),function(){"use strict";angular.module("math.adjust-curve",[]).factory("adjustCurve",["$q",function(e){function a(e){for(var a,r,o,t,s={options:{tooltip:{style:{padding:10,fontWeight:"bold"}}},series:[{name:"Puntos",data:[1,2,3,4,5,6],type:"scatter",id:"series-0"},{name:"R",data:[3,1],type:"line",id:"series-1"}],title:{text:"Mínimos cuadrados"},useHighStocks:!1},n=e.length,l={solveTable:[{x:"X",y:"Y",a:"X * Y",b:"χ²",c:"a + b X",d:"Y - Ŷ"}],solveSum:[{symbol:"Σχ:",value:0},{symbol:"ΣY:",value:0},{symbol:"Σ(X * Y):",value:0},{symbol:"Σ(χ²):",value:0},{symbol:"Σ(Y - Ŷ):",value:0}],solveAB:[],solveR:""},i=0,u=0;u<n;u++)""===e[u].x&&(e[u].x=0),""===e[u].y&&(e[u].y=0),a=e[u].x*e[u].y,r=Math.pow(e[u].x,2),o=a+(r+e[u].x),t=e[u].y-o,i+=Math.pow(e[u].y,2),l.solveTable.push({x:e[u].x,y:e[u].y,a:a,b:r,c:o,d:t});for(u=1;u<l.solveTable.length;u++)l.solveSum[0].value+=l.solveTable[u].x,l.solveSum[1].value+=l.solveTable[u].y,l.solveSum[2].value+=l.solveTable[u].a,l.solveSum[3].value+=l.solveTable[u].b,l.solveSum[4].value+=l.solveTable[u].d;l.solveAB[1]=(n*l.solveSum[2].value-l.solveSum[0].value*l.solveSum[1].value)/(n*l.solveSum[3].value-Math.pow(l.solveSum[0].value,2)),l.solveAB[0]=(l.solveSum[1].value+l.solveAB[1]*l.solveSum[0].value)/n;var c=l.solveSum[2].value,v=l.solveSum[0].value,m=l.solveSum[1].value,d=l.solveSum[3].value,f=(d-Math.pow(v,2)/n)*(i-Math.pow(m,2)/n);l.solveR=(c-v*m/n)/Math.sqrt(f,2),l.solveR2=Math.pow(l.solveR,2),l.graphics=[];var p=[],h=[],x=[];for(u=1;u<l.solveTable.length;u++)p.push([l.solveTable[u].x,l.solveTable[u].y]),h.push(l.solveTable[u].y),x.push(l.solveTable[u].x);return s.series[0].data=p,s.series[1].data=[[0,Math.min(h)],[Math.max(x),Math.max(h)]],l.graphics=s,l}return{options:function(r,o){var t=e.defer(),s={resolve:"/adjust_curve/view_adjust_curve.html",graphics:"/adjust_curve/view_graphics.html"};return"Mínimos cuadrados"==o?t.resolve([a(r),s]):t.reject("Método desconocido"),t.promise}}}])}(),function(){"use strict";angular.module("math.general",[]).factory("general",["$q",function($q){function op_basic(input){var solucion=eval(input);return solucion}function derivar(e){var a;try{a=deriveExpression(e)}catch(e){a="Expresiones invalidas."}return a}return{options:function(e,a){var r=$q.defer(),o={resolve:"/general/view_general.html"};return"Operación basica"==a?r.resolve([op_basic(e),o]):"Derivar"==a?r.resolve([derivar(e),o]):r.reject("Método desconocido"),r.promise}}}])}(),function(){"use strict";angular.module("math.search-raiz",[]).factory("searchRaiz",function($q){function point_fixed(e){}function bisection(e){console.log(e);for(var a,r,o,t=e.x1,s=0,n=0;n<e.iteracion;n++)s=t,t=(parseFloat(e.x1)+parseFloat(e.x2))/2,a=replaceValues(e.funcion,parseFloat(e.x1)),r=replaceValues(e.funcion,t),o=100*Math.abs((t-s)/t),a*r<0?e.x2=t:e.x1=t;return{XR:t,error:o}}function newton(e){}function rule_false(e){for(var a,r,o,t,s=e.x2,n=0,l=0;l<e.iteracion;l++)n=s,a=replaceValues(e.funcion,parseFloat(x1)),r=replaceValues(e.funcion,parseFloat(x2)),s=parseFloat(x2)-r*(parseFloat(x1)-parseFloat(x2))/(a-r),t=100*Math.abs((s-n)/s),o=replaceValues(e.funcion,s),a*o<0?x2=s:x1=s;return{XR:s,error:t}}function parse_input(e){var a=e.split(";");return{funcion:a[0],x1:parseInt(a[1]),x2:parseInt(a[2]),iteracion:parseInt(a[3])}}function replaceValues(funcion,x){return funcion=replaceOthers(funcion,"pow"),funcion=replaceOthers(funcion,"x",x),eval(funcion)}function replaceAll(e,a,r){return e.replace(new RegExp(a,"g"),r)}function replaceOthers(e,a,r){if(e=replaceAll(e," ",""),"pow"==a)for(;e.indexOf("^")!=-1;)e=e.replace("^","**");else if("x"==a)for(var o=e.indexOf("x");o!=-1;){var t=void 0!==e[o-1]&&isNumeric(e[o-1]),s=void 0!==e[o+1]&&isNumeric(e[o+1]);e=t&&s?e.replace("x","*"+r+"*"):t?e.replace("x","*"+r):s?e.replace("x",r+"*"):e.replace("x",r),o=e.indexOf("x")}return e}function isNumeric(e){return e-0==e&&(""+e).trim().length>0}return{options:function(e,a){var r=$q.defer(),o={resolve:"/search_raiz/view_search_raiz.html"};return e=parse_input(e),"Punto fijo"==a?r.resolve([point_fixed(e),o]):"Bisección"==a?r.resolve([bisection(e),o]):"Newton Raphson"==a?r.resolve([newton(e),o]):"Regla falsa"==a?r.resolve([rule_false(e),o]):r.reject("Método desconocido"),r.promise}}})}();